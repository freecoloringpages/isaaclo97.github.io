<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>FCE</title>

<!-- use viewport settings when body.onresize adapts the chessboard to the available space -->
<meta name="viewport" content="initial-scale=1, maximum-scale=1">


<style id="dynamicStyle" type="text/css"></style>
<link rel="stylesheet" href="FCE_files/fce.css">


<script type="text/javascript" async="" src="FCE_files/ga.js.descarga"></script><script src="FCE_files/jquery.min.js.descarga"></script>

<script type="text/javascript">
jQuery.noConflict();
var ww = 0, wh = 0;
  
var squareSize;

function myRulesLength(sheet) {
  if (sheet.cssRules) { return sheet.cssRules.length; }
  if (sheet.rules) { return sheet.rules.length; }
  return null;
}

function myInsertRule(sheet, selector, declaration) {
  if (sheet.insertRule) { sheet.insertRule(selector + "{ " + declaration + " }", myRulesLength(sheet)); }
  else if (sheet.addRule) { sheet.addRule(selector, declaration); }
}

function myDeleteRule(sheet, index) {
  if (sheet.deleteRule) { sheet.deleteRule(index); }
  else if (sheet.removeRule) { sheet.removeRule(index); }
}


function myOnResize() {
  if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE
    ww = window.innerWidth;
    wh = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'
    ww = document.documentElement.clientWidth;
    wh = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    //IE 4 compatible
    ww = document.body.clientWidth;
    wh = document.body.clientHeight;
  }
  
  boardObject = document.getElementById("GameBoard");
  maxAvaiable = Math.max(ww, wh);
  minAvaiable = Math.min(ww, wh);
  squareSize = Math.floor(minAvaiable / 8.3);
  if (squareSize > 0) {
    pieceSize = Math.floor(squareSize * 0.9);
    boardBorder = Math.ceil(squareSize / 20);
    shadowBorder = Math.floor(squareSize / 2);
    textSize = Math.floor(squareSize / 6);
	containerWidth = maxAvaiable - squareSize*9;
     sheet = document.styleSheets[0];
  	oldRules = myRulesLength(sheet);
    myInsertRule(sheet,".boardTable"," border-width: " + boardBorder + "px; border-radius: " + boardBorder + "px; box-shadow: 0px 0px " + shadowBorder + "px #734C27; ", oldRules);
    myInsertRule(sheet,".pieceImage","width:" + pieceSize + "px; height:" + pieceSize + "px;  ", oldRules);
    myInsertRule(sheet,".whiteSquare", "width:" + squareSize + "px; height:" + squareSize + "px;  ", oldRules);
    myInsertRule(sheet,".blackSquare", "width:" + squareSize + "px; height:" + squareSize + "px;  ", oldRules);
    myInsertRule(sheet,".highlightWhiteSquare", "width:" + squareSize + "px; height:" + squareSize + "px;  ", oldRules);
    myInsertRule(sheet,".highlightBlackSquare", "width:" + squareSize + "px; height:" + squareSize + "px;  ", oldRules);
    myInsertRule(sheet,"body","font:" + textSize + "px sans-serif; ",oldRules);
    //myInsertRule(sheet,"#blackColor {width:" + textSize + " px; height:" + textSize + " px; margin-right:" + (1.5*textSize) + " px; margin-top:" + (0.5*textSize) + " px; }",sheet.cssRules.length);
    myInsertRule(sheet,"#whiteColor","width:" + textSize + "px; height:" + textSize + "px; margin-right:" + (1.5*textSize) + "px; margin-top:" + (0.5*textSize) + "px; ",oldRules);
    myInsertRule(sheet,"#BlackColorFlag ","width:" + (textSize) + "px; height:" + (textSize) + "px; ",oldRules);
    myInsertRule(sheet,"#WhiteColorFlag ","width:" + (textSize) + "px; height:" + (textSize) + "px; ",oldRules);
    myInsertRule(sheet,".clock","margin-left:" + (1.5*textSize) + "px; ",oldRules);
    myInsertRule(sheet,"#wrapper","width:" + (window.innerWidth-4) + "; ", oldRules);
    if(ww > wh){
    	myInsertRule(sheet,".moves","height:" + (squareSize*2.5) + "px;", oldRules);
    	myInsertRule(sheet,".headerContainer","width:26em;", oldRules);
    	myInsertRule(sheet,"#blackColor","width:" + textSize + "px; height:" + textSize + "px;margin-left:0px; margin-right:" + (1.5*textSize) + "px; margin-top:" + (0.5*textSize) + "px; ",oldRules);
    }else{
    	myInsertRule(sheet,".headerContainer","width:" + (squareSize * 8) + "px;", oldRules);
    	myInsertRule(sheet,"#blackColor","width:" + textSize + "px; height:" + textSize + "px; margin-right:0px; margin-left:" + (1.5*textSize) + "px; margin-top:" + (0.5*textSize) + "px; ",oldRules);

    }
    for (ii = 0; ii < oldRules; ii++) { myDeleteRule(sheet, 0); }

    //boardObject.style.paddingTop = (window.innerHeight - 8 * squareSize - 2 * boardBorder) / 2 + "px";
    //boardObject.style.paddingBottom = (window.innerHeight - 8 * squareSize - 2 * boardBorder) / 2 + "px";
    //boardObject.style.paddingLeft = (window.innerWidth - 8 * squareSize - 2 * boardBorder) / 2 + "px";
    //boardObject.style.paddingRight = (window.innerWidth - 8 * squareSize - 2 * boardBorder) / 2 + "px";
    if (theObj = document.getElementById("boardTable")) {
      theObj.style.height = (squareSize * 8 + boardBorder * 2) + "px";
      theObj.style.width = (squareSize * 8 + boardBorder * 2) + "px";
    }
  }
}

</script>
<style type="text/css">
@import url("fonts/pgn4web-font-ChessSansPiratf.css");
@import url("fonts/pgn4web-font-LiberationSans.css");
</style>
<script src="FCE_files/pgn4web.js.descarga" type="text/javascript"></script>
<script src="FCE_files/chess-informant-NAG-symbols.js.descarga" type="text/javascript"></script><link href="FCE_files/pgn4web-font-ChessInformantReader.css" type="text/css" rel="stylesheet"><style type="text/css">.NAGs, .NAGl { font-family: "pgn4web ChessInformantReader"; line-height: 1em; }</style>

<script type="text/javascript">
// Aqui van les opcions del pgn4web.js
iniGame="1";
thisRegExp = /(&|\?)(initialGame|ig)=([^&]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
  iniGame = unescape(window.location.search.match(thisRegExp)[3]);
}
SetInitialGame(iniGame);

function customFunctionOnMove() {
//nombre de jugades que es mostren a la pantalla
  extraMoves = 200;

  document.getElementById("GamePrevMoves").innerHTML = "";
  document.getElementById("GameCurrMove").innerHTML = "";
  document.getElementById("GameNextMoves").innerHTML = "";
  theObj = document.getElementById("GamePrevMoves");
  thisPly = Math.max(CurrentPly - extraMoves - 1, StartPly);
  if (thisPly > StartPly) { theObj.innerHTML += "... "; }
  for (; thisPly < Math.min(CurrentPly + extraMoves, StartPly + PlyNumber); thisPly++) {
    if (thisPly == CurrentPly) {
      theObj = document.getElementById("GameNextMoves");
    }
    if (thisPly % 2 === 0) { theObj.innerHTML += Math.floor(1 + thisPly / 2) + ". "; }
    if (thisPly == CurrentPly - 1) {
      theObj = document.getElementById("GameCurrMove");
    }
    theObj.innerHTML += Moves[thisPly] + " ";
  }
  if (thisPly < StartPly + PlyNumber) { theObj.innerHTML += "..."; }

  fixHeaderItem(null, "GameWhiteClock", "Rellotge Blanques");
  fixHeaderItem(null, "GameBlackClock", "Rellotge Negres");
  fixColorFlag();
  clearInterval(timerVar);
  if ((!LiveBroadcastEnded)&&(thisPly == CurrentPly)){
  	//timer();
  }
}

function fixHeaderItem(tag, objectId, label) {
  if (theObj = document.getElementById(objectId)) {
    var tagValue = tag ? customPgnHeaderTag(tag, objectId) : theObj.innerHTML;
    if (tagValue) {
      theObj.title = label + ": " + tagValue;
      //theObj.className = "leftRightSpacing";
    } else {
      theObj.title = label;
      //theObj.className = "";
    }
  }
}

var seconds;
var minutes;
var hours;
var idClock;
var timerVar;

function timer(){
	
	idClock = CurrentPly % 2 ? "GameBlackClock" : "GameWhiteClock";
	if(theObj = document.getElementById(idClock)){
		time = theObj.innerHTML;
		if (time.length==7){
			seconds = parseInt(time.substr(5,2));
			minutes = parseInt(time.substr(2,2));
			hours = parseInt(time.substr(0,1));
			timerVar = setInterval(function(){
				if(seconds==0){
					seconds=59;
					minutes--;
				}else{
					seconds--;
				}
				document.getElementById(idClock).innerHTML=hours+":"+pad(minutes,2)+"."+pad(seconds,2);
			},1000);
		}
	}
}

function pad(num, size) {
    var s = num+"";
    while (s.length < size) s = "0" + s;
    return s;
}

//Live
SetPgnUrl("f/games.pgn");
SetGameSelectorOptions(null, true, 0, 0, 0, 15, 15, 3, 0); // (head, num, chEvent, chSite, chRound, chWhite, chBlack, chResult, chDate);

   SetCommentsIntoMoveText(false);
   SetCommentsOnSeparateLines(false);
   SetAutoplayDelay(1000); // milliseconds
// SetAutostartAutoplay(false);
// SetAutoplayNextGame(false); // if set, move to the next game at the end of the current game during autoplay
//   SetInitialGame("1"); // number of game to be shown at load, from 1 (default); values (keep the quotes) of "first", "last", "random" are accepted; other string values assumed as PGN search string
// SetInitialVariation(0); // halfmove number to be shown at load, 0 (default) for main variation

   // make sure each time a game is loaded the last played move is shown
   SetInitialHalfmove("end", true); // halfmove number to be shown at load, 0 (default) for start position; values (keep the quotes) of "start", "end", "random", "comment" (go to first comment or variation), "variation" (go to the first variation) are also accepted. Second parameter if true applies the setting to every selected game instead of startup only

   // set live broadcast; parameters are delay (refresh delay in minutes, 0 means no broadcast, default 0) alertFlag (if true, displays debug error messages, default false) demoFlag (if true starts broadcast demo mode, default false) stepFlag (if true, autoplays updates in steps, default false)
// SetLiveBroadcast(1, false, false, false);  // enable this one for real live broadcast using the live-grab.sh script
   SetLiveBroadcast(1, false, false, false); // enable this one for live broadcast demo

   
SetHighlightOption(true);
SetAutostartAutoplay(true);
SetAutoplayNextGame(false);
SetShortcutKeysEnabled(false);
SetImagePath("files/images/");
SetImageType("png");
clearShortcutSquares("ABCDEFGH", "12345678");
//clearShortcutSquares("A", "123456");

function customFunctionOnPgnGameLoad() {
  myOnResize();
  customPgnHeaderTag("TimeControl", "GameTimeControl");
  fixHeaderItem(null, "GameEvent", "Torneig");
  fixHeaderItem(null, "GameSite", "Lloc");
  fixHeaderItem(null, "GameDate", "Data");
  fixHeaderItem(null, "GameRound", "Ronda");
  fixHeaderItem(null, "GameWhite", "white player");
  fixHeaderItem(null, "GameBlack", "black player");
  fixHeaderItem(null, "GameResult", "Resultat");
  fixHeaderItem("Section", "GameSection", "section");
  fixHeaderItem("Stage", "GameStage", "stage");
  fixHeaderItem("WhiteTitle", "GameWhiteTitle", "white title");
  fixHeaderItem("WhiteElo", "GameWhiteElo", "white elo");
  fixHeaderItem("WhiteTeam", "GameWhiteTeam", "white team");
  fixHeaderItem("BlackTitle", "GameBlackTitle", "black title");
  fixHeaderItem("BlackElo", "GameBlackElo", "black elo");
  fixHeaderItem("BlackTeam", "GameBlackTeam", "black team");
  //updateBareShortcut();
}

function fixColorFlag() {

    if (theObj = document.getElementById("whiteColorFlag")) {
      theObj.style.display = "inline";
      theObj.style.visibility = CurrentPly % 2 ? "hidden" : "visible";
    }
    if (theObj = document.getElementById("blackColorFlag")) {
      theObj.style.display = "inline";
      theObj.style.visibility = CurrentPly % 2 ? "visible" : "hidden";
    }
  }

function customDebugInfo() { return "squareSize=" + squareSize; }
</script>

  <link rel="stylesheet" href="FCE_files/css3-buttons.css" type="text/css" media="screen">
  
  <!-- Using TipTip jQuery plugin for the tooltips 
  <link rel="stylesheet" href="buttons/tiptip.css" type="text/css"  media="screen">
	<script src="buttons/jquery.tiptip.js"></script> -->
	<script type="text/javascript">
		
		function toggleAutoplayBtn(){
			if(isAutoPlayOn){
				jQuery('#autoplayButton').children().removeClass('icon35');
				jQuery('#autoplayButton').children().addClass('icon6');
			}else{
				if (thisPly < StartPly + PlyNumber){
					jQuery('#autoplayButton').children().removeClass('icon6');
					jQuery('#autoplayButton').children().addClass('icon35');
				}
			}
		}
	</script>

</head>

<body  onload=" myOnResize(); start_pgn4web(); setTimeout(function () {window.scrollTo(0, 1)}, 100);" onresize="myOnResize();">

<div id="wrapper">
<div id="GameBoard"></div>

<div class="headerContainer" id="HeaderContainer">
<!-- <div class="firstVariableSpacer">&nbsp;</div> -->

<div><span id="GameEvent" class="GameEvent" title="Torneig: "></span></div>

<div id="PlaceDate">
	<span id="GameSite" class="GameSite" title="Lloc: ?"></span>
	<span class="GameRound">(</span>
	<span id="GameSection" class="GameSection" title="section"></span>
	<span id="GameStage" class="GameStage" title="stage"></span>
	<span id="GameRound" class="GameRound" title="Ronda: "></span>
	<span class="GameRound">)</span>
	<span id="GameDate" class="GameDate" title="Data: 2018.08.08" style="white-space: nowrap;"></span>
</div>

<div id="blocJugadors">
<div id="jugada" class="jugada">
	<div class="GameLastMove"><span id="GameLastMove"><span class="move notranslate"></span><a href="javascript:void(0);" onclick="GoToMove(53, 0);" class="move notranslate" onfocus="this.blur();"></a></span></div>
	<div class="GameNextMove"><span id="GameNextMove"><span class="move notranslate"></span></span></div>
	<div>&nbsp;<a href="javascript:void(0);" onclick="newMovesFlag(false); this.blur();" title="new moves received" id="GameNewMoves"></a>&nbsp;</div>
</div>
<div class="rellotgeBlanc">
	<span style="display:inline-block;" title="Mouen les blanques">
		<img class="" style="display: inline; visibility: hidden;" id="whiteColorFlag" src="./FCE_files/rarrow.png">
	</span>
	<span class="clock" id="GameWhiteClock" title="Rellotge Blanques"></span>
</div>

<div class="jugadorBlanc">
	
	<div class="colorFlag colorFlagW" style="background:white;" id="whiteColor"></div>
	<div class="GameWhite" id="GameWhite" href="javascript:void(0);" title="white player: "></div>
	<span class="GameWhiteTitle" id="GameWhiteTitle" title="white title"></span>
	<span class="GameWhiteElo" id="GameWhiteElo" title="white elo: "></span>
	<span class="GameWhiteTeam" id="GameWhiteTeam" title="white team"></span>
	
</div>

<div class="jugadorNegre">
	<div class="colorFlag colorFlagB" id="blackColor"></div>
	<div class="GameBlack" id="GameBlack" href="javascript:void(0);" title="black player: "></div>
	<span class="GameBlackTitle" id="GameBlackTitle" title="black title"></span>
	<span class="GameBlackElo" id="GameBlackElo" title="black elo: "></span>
	<span class="GameBlackTeam" id="GameBlackTeam" title="black team"></span>
</div>

<div class="rellotgeNegre">
	<span style="display:inline-block;" title="Mouen les negres">
		<img class="" style="display: inline; visibility: visible;" id="blackColorFlag" src="./FCE_files/rarrow.png">
	</span>
	<span class="clock" id="GameBlackClock" title="Rellotge Negres"></span>
</div>
</div>

<div class="moves">
	<a class="move" id="GamePrevMoves" href="javascript:void(0);" onclick="GoToMove(CurrentPly - 1); this.blur();" title="previous moves"></a>
	<a class="variation" style="font-weight: bold;" id="GameCurrMove" href="javascript:void(0);" onclick="SetHighlight(!highlightOption); this.blur();" title="current move as shown on chessboard"></a>
	<a class="move" id="GameNextMoves" href="javascript:void(0);" onclick="GoToMove(CurrentPly + 1); this.blur();" title="next moves"></a>
</div>
<div class="GameResult">
	<span id="GameResult" title="Resultat:" style="white-space: nowrap;"></span>
</div>

<div id="GameButtons"><a href="javascript:void(0)" id="startButton" onclick="clickedBbtn(this,event);" class="button" title="Inici Partida"><span class="icon icon7"></span></a><a href="javascript:void(0)" id="backButton" onclick="clickedBbtn(this,event);" class="button" title="Jugada Anterior"><span class="icon icon8"></span></a><a href="javascript:void(0)" id="autoplayButton" onclick="clickedBbtn(this,event); toggleAutoplayBtn();" class="button" title="Reproducció Automàtica"><span class="icon icon6"></span></a><a href="javascript:void(0)" id="forwardButton" onclick="clickedBbtn(this,event);" class="button" title="Jugada Següent"><span class="icon icon9"></span></a><a href="javascript:void(0)" id="endButton" onclick="clickedBbtn(this,event);" class="button" title="Fi Partida"><span class="icon icon10"></span></a><a href="javascript:void(0)" onclick="javascript:window.history.back();" class="button" title="Llista de Partides"><span class="icon icon120"></span></a></div>

</div>

</div>


</body></html>